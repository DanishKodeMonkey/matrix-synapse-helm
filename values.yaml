global:
  domain: matrix.danishkodemonkey.net
  elementDomain: element.danishkodemonkey.net

synapse:
  storage:
    size: 10Gi
    storageClassName: ""
  image:
    repository: matrixdotorg/synapse
    tag: latest
    pullPolicy: IfNotPresent
  port: 8008
  replicas: 1
  recaptcha:
    siteKey: "" # set these in a non-commited .secrets.yaml
    secretKey: "" # set these in a non-commited .secrets.yaml
  registration_shared_secret: "" # set these in a non-commited .secrets.yaml
  registration:
    enabled: true
    allowWithoutVerification: false
    captchaEnabled: true
    requiresToken: false
  wellKnown:
    # Whether Synapse should serve /.well-known/matrix/server.
    serveServer: true
    # Optional delegation target for federation discovery (m.server), e.g. matrix.example.com:443.
    delegatedServer: "matrix.danishkodemonkey.net:443"
  federation:
    # Optional allowlist of remote homeserver domains for federation.
    # Leave empty to allow normal federation with any server.
    whitelist: ["noidorith.net"]
  publicRooms:
    # Allow other homeservers to query this server's public room directory.
    allowOverFederation: true
    # Allow unauthenticated directory queries.
    allowWithoutAuth: false
    # Require local admins to publish rooms/spaces to the directory.
    requireAdminToPublish: true
  onboarding:
    autoJoinRooms:
      - "#announcements:matrix.danishkodemonkey.net"
      - "#rules:matrix.danishkodemonkey.net"
    autoCreateAutoJoinRooms: false
    autoJoinRoomsFederated: false
    autoJoinMxidLocalpart: "system"
  moderation:
    # Optional explicit override. If empty, chart falls back to publicRooms.requireAdminToPublish.
    roomListPublicationRules: []
    # Optional alias creation policy rules. Leave empty for Synapse defaults.
    aliasCreationRules: []
  retention:
    enabled: false
    defaultPolicy:
      minLifetime: ""
      maxLifetime: ""
    allowedLifetimeMin: ""
    allowedLifetimeMax: ""
  mediaRetention:
    enabled: true
    localMediaLifetime: "365d"
    remoteMediaLifetime: "365d"
  media:
    maxUploadSize: "100M"
    urlPreviewsEnabled: true
    urlPreviewIpRangeBlacklist: []
    urlPreviewIpRangeWhitelist: []
  serverNotices:
    enabled: true
    systemMxidLocalpart: "notices"
    roomName: "Server Notices"
    roomAvatarUrl: ""
    roomTopic: "Official updates, policy changes, and maintenance notices."
    autoJoin: true

element:
  image:
    repository: vectorim/element-web
    tag: latest
    pullPolicy: IfNotPresent
  port: 80
  replicas: 1
  branding:
    appName: "Danish Kode Monkey Matrix"
    authHeaderLogoUrl: "https://element.danishkodemonkey.net/static-assets/logo.svg"
    welcomeBackgroundUrl: "https://element.danishkodemonkey.net/static-assets/welcome-bg.svg"
    authFooterLinks:
      - text: "Server Rules"
        url: "https://element.danishkodemonkey.net/pages/rules.html"
      - text: "Getting Started"
        url: "https://element.danishkodemonkey.net/pages/welcome.html"
    userNotice: "By signing in, you agree to the server rules and moderation policy."
  embeddedPages:
    enabled: false
    homeUrl: ""
    welcomeUrl: ""
  staticPages:
    enabled: true
    image:
      repository: nginx
      tag: "1.27-alpine"
      pullPolicy: IfNotPresent
    replicas: 1
    port: 80
    pathPrefix: /pages
    assetsPathPrefix: /static-assets
  ui:
    disableCustomUrls: false
    disableGuests: false
    disableLoginLanguageSelector: false
    disable3pidLogin: false
    defaultCountryCode: "GB"
    showLabsSettings: true
    defaultFederate: true
    defaultTheme: "dark"
    roomDirectoryServers:
      - "matrix.danishkodemonkey.net"
    enablePresence: true
  integrations:
    uiUrl: "https://scalar.vector.im/"
    restUrl: "https://scalar.vector.im/api"
    widgetsUrls:
      - "https://scalar.vector.im/_matrix/integrations/v1"
      - "https://scalar.vector.im/api"
  jitsi:
    preferredDomain: "meet.element.io"
  bugReportEndpointUrl: "https://rageshakes.element.io/api/submit"
  features: {}
  settingDefaults:
    breadcrumbs: true
  # Arbitrary JSON object merged into generated Element config last.
  extraConfig:
    permalink_prefix: "https://matrix.danishkodemonkey.net"

coturn:
  realm: turn.danishkodemonkey.net
  relay_ip: 192.168.0.150 # internal IP of the cluster node
  turn_url: turn.danishkodemonkey.net
  turn_shared_secret: ""
  public_ip_static: ""

matrixrtc:
  enabled: false
  host: rtc.danishkodemonkey.net
  ingressClassName: ""
  certManagerClusterIssuer: letsencrypt

  livekit:
    image:
      repository: livekit/livekit-server
      tag: v1.9.3
      pullPolicy: IfNotPresent
    service:
      port: 7880
    hostNetwork: true
    # Required for media traffic if hostNetwork is enabled.
    # Open this UDP range on your firewall/router to the k3s node running LiveKit.
    rtc:
      tcpPort: 7881
      portRangeStart: 50100
      portRangeEnd: 50200
      useExternalIp: true
    # livekit API key/secret pair (both required when enabled=true)
    key: ""
    secret: ""

  jwt:
    image:
      # Example image from your prior manifests. Override with your actual JWT service image.
      repository: ghcr.io/element-hq/lk-jwt-service
      tag: latest
      pullPolicy: IfNotPresent
    replicas: 1
    service:
      port: 8080

  element:
    # Optional helper value for docs/reference. If set, expose this in your Element config manually.
    livekit_service_url: "https://rtc.danishkodemonkey.net/livekit/jwt"
